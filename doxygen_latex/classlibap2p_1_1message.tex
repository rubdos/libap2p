\hypertarget{classlibap2p_1_1message}{\section{libap2p\-:\-:message Class Reference}
\label{classlibap2p_1_1message}\index{libap2p\-::message@{libap2p\-::message}}
}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classlibap2p_1_1message_a433fa67765f72a86c6a022aa35ff06b7}{\hyperlink{classlibap2p_1_1message_a433fa67765f72a86c6a022aa35ff06b7}{message} ()}\label{classlibap2p_1_1message_a433fa67765f72a86c6a022aa35ff06b7}

\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
\hyperlink{classlibap2p_1_1message_a6609bf74f5cc5e2ea353751abcff149a}{message} (unsigned int, std\-::string)
\begin{DoxyCompactList}\small\item\em Constructor with data. Used to prepare a message to be send. \end{DoxyCompactList}\item 
\hyperlink{classlibap2p_1_1message_ab1c39ec5721f3520eed6735df2f335ef}{message} (std\-::string)
\begin{DoxyCompactList}\small\item\em Constructor from X\-M\-L content. \end{DoxyCompactList}\item 
std\-::string \hyperlink{classlibap2p_1_1message_a9fbf46058138df50dff71e53d04ad383}{get\-\_\-xml} ()
\begin{DoxyCompactList}\small\item\em Get the xml text for the message Internally used. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 27 of file message.\-hpp.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{classlibap2p_1_1message_a6609bf74f5cc5e2ea353751abcff149a}{\index{libap2p\-::message@{libap2p\-::message}!message@{message}}
\index{message@{message}!libap2p::message@{libap2p\-::message}}
\subsubsection[{message}]{\setlength{\rightskip}{0pt plus 5cm}libap2p\-::message\-::message (
\begin{DoxyParamCaption}
\item[{unsigned int}]{messagetype, }
\item[{std\-::string}]{messagedata}
\end{DoxyParamCaption}
)}}\label{classlibap2p_1_1message_a6609bf74f5cc5e2ea353751abcff149a}


Constructor with data. Used to prepare a message to be send. 


\begin{DoxyParams}{Parameters}
{\em messagetype} & Message type. Can be any uint. Will be send through the socket \\
\hline
{\em messagedata} & The data to send. Easy construction by boost\-::asio\-::buffer(\mbox{[}anything here\mbox{]}); \\
\hline
\end{DoxyParams}


Definition at line 44 of file message.\-cpp.


\begin{DoxyCode}
\{
        this->\_init();
        this->\_message\_type = messagetype;
        this->\_message\_data = messagedata;
\}
\end{DoxyCode}
\hypertarget{classlibap2p_1_1message_ab1c39ec5721f3520eed6735df2f335ef}{\index{libap2p\-::message@{libap2p\-::message}!message@{message}}
\index{message@{message}!libap2p::message@{libap2p\-::message}}
\subsubsection[{message}]{\setlength{\rightskip}{0pt plus 5cm}libap2p\-::message\-::message (
\begin{DoxyParamCaption}
\item[{std\-::string}]{xml\-\_\-str}
\end{DoxyParamCaption}
)}}\label{classlibap2p_1_1message_ab1c39ec5721f3520eed6735df2f335ef}


Constructor from X\-M\-L content. 


\begin{DoxyParams}{Parameters}
{\em xml\-\_\-str} & an std\-::string with xml contents. \\
\hline
\end{DoxyParams}


Definition at line 55 of file message.\-cpp.


\begin{DoxyCode}
\{
        this->\_init();

        std::stringstream in;
        in << xml\_str;

        boost::property\_tree::ptree pt;

        read\_xml(in, pt);

        this->\_message\_version = pt.get<std::string>(\textcolor{stringliteral}{"libap2p.version"});
        this->\_message\_data = pt.get<std::string>(\textcolor{stringliteral}{"libap2p.message.data"});
        this->\_message\_type = pt.get<\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}>(\textcolor{stringliteral}{"libap2p.message.type"});
        this->\_message\_signature = pt.get<std::string>(\textcolor{stringliteral}{"
      libap2p.signature.signature"});
        this->\_message\_signature\_type = pt.get<std::string>(\textcolor{stringliteral}{"
      libap2p.signature.type"});
\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{classlibap2p_1_1message_a9fbf46058138df50dff71e53d04ad383}{\index{libap2p\-::message@{libap2p\-::message}!get\-\_\-xml@{get\-\_\-xml}}
\index{get\-\_\-xml@{get\-\_\-xml}!libap2p::message@{libap2p\-::message}}
\subsubsection[{get\-\_\-xml}]{\setlength{\rightskip}{0pt plus 5cm}std\-::string libap2p\-::message\-::get\-\_\-xml (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classlibap2p_1_1message_a9fbf46058138df50dff71e53d04ad383}


Get the xml text for the message Internally used. 

\begin{DoxyReturn}{Returns}
The xml-\/structure of the message. 
\end{DoxyReturn}
todo\-: Check signature before sending? 

Definition at line 86 of file message.\-cpp.


\begin{DoxyCode}
\{
        boost::property\_tree::ptree pt;
        std::stringstream out;

        pt.put(\textcolor{stringliteral}{"libap2p.version"}, \textcolor{stringliteral}{"0.0.1"});
        pt.put(\textcolor{stringliteral}{"libap2p.message.type"}, this->\_message\_type);
        pt.put(\textcolor{stringliteral}{"libap2p.message.data"}, this->\_message\_data);
        pt.put(\textcolor{stringliteral}{"libap2p.signature.signature"}, this->\_message\_signature); 
        pt.put(\textcolor{stringliteral}{"libap2p.signature.type"}, this->\_message\_signature\_type);
        
        write\_xml(out, pt);
        
        \textcolor{keywordflow}{return} out.str();
\}
\end{DoxyCode}


The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
include/message/message.\-hpp\item 
src/message/message.\-cpp\end{DoxyCompactItemize}
